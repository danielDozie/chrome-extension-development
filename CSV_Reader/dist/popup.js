(()=>{"use strict";var e,t,n,r={8776:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(8081),l=n.n(r),o=n(3645),i=n.n(o)()(l());i.push([e.id,".inner-container {\n    display: flex;\n    flex-direction: column;\n    gap: 4;\n    align-items: center;\n    padding-top: 22px;\n}\n\n.inner-container_icon {\n    font-size: 25px;\n}",""]);const a=i},6699:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(8081),l=n.n(r),o=n(3645),i=n.n(o)()(l());i.push([e.id,"body {\n    background-color: #f5f5f5;\n    width: 330px;\n    height: 400px;\n    font-family: 'Roboto';\n}\n\n.ext_title {\n    text-align: center;\n    color: #2196f3;\n}",""]);const a=i},7119:(e,t,n)=>{var r=n(7294),l=n(745),o=n(8720),i=n(8936),a=(n(2776),n(3379)),s=n.n(a),c=n(7795),u=n.n(c),d=n(569),p=n.n(d),m=n(3565),f=n.n(m),g=n(9216),v=n.n(g),h=n(4589),y=n.n(h),b=n(8776),x={};x.styleTagTransform=y(),x.setAttributes=f(),x.insert=p().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=v(),s()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals;var O=n(9583),E=n(463),w=n(3119);const R=/.*\/customer-reviews\/(\w+)\//,S=e=>{const t=R.exec(e.link);if(null!==t)return"https://sellercentral.amazon.com/brandcustomerreviews/api/reviews/".replace("/reviews/",`/reviews/${t[1]}`)};const j={flex:1,display:"flex",flexDirection:"column",justifyItemss:"center",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:10,borderColor:"#bdbdbd",borderStyle:"dashed",height:"120px",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},T={borderColor:"#2196f3"},k={borderColor:"#00e676",color:"#00e676"},P={borderColor:"#ff1744",color:"#ff1744"},I=()=>{const e=(0,w.I0)(),{acceptedFiles:t,getRootProps:n,getInputProps:l,isFocused:o,isDragAccept:i,isDragReject:a}=(0,E.uI)({accept:{"text/csv":[".csv"]},onDrop:(t,n)=>{return r=void 0,l=void 0,i=function*(){if(t.length){const n=t,r=yield function(e){return t=this,n=void 0,l=function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e)},r.onerror=e=>n(r.error),r.readAsText(e)}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{s(l.next(e))}catch(e){o(e)}}function a(e){try{s(l.throw(e))}catch(e){o(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}s((l=l.apply(t,n||[])).next())}));var t,n,r,l}(n[0]),l=r.split(/\n/).filter((e=>""!==e));l.length&&(e({type:"IMPORT_LINKS",payload:l.map((e=>({link:e,date:new Date(Date.now())})))}),e({type:"TRANSFORM_IMPORT_LINK",payload:l.map((e=>({link:S({link:e}),originalLink:e})))}))}},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(i.next(e))}catch(e){t(e)}}function a(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}s((i=i.apply(r,l||[])).next())}));var r,l,o,i}}),s=(0,r.useMemo)((()=>Object.assign(Object.assign(Object.assign(Object.assign({},j),o?T:{}),i?k:{}),a?P:{})),[o,i,a]);return r.createElement("div",{className:"container"},r.createElement("div",Object.assign({},n({style:s})),r.createElement("input",Object.assign({},l())),r.createElement("div",{className:`inner-container ${i?k:P}`},r.createElement(O.l7t,{className:"inner-container_icon"}),r.createElement("p",{className:"inner-container_text"},"Select or Drop CSV File(s) to upload"))))};r.createElement(I,null);const _=I;var A=n(3990),D=n(1647),Z=n(3854);function N(e){return r.createElement(o.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,backgroundColor:"white",borderRadius:"8px",height:"30px",padding:"10px"}},r.createElement(o.Z,{sx:{display:"flex",alignItems:"center",border:"black"}},r.createElement(Z.ivT,{style:{padding:"2px"}})),r.createElement(o.Z,{sx:{width:"100%",height:"20px",paddingBottom:"10px"}},r.createElement(D.Z,{style:{fontSize:"12px",marginBottom:"2px"}},"FileName.csv"),r.createElement(A.Z,Object.assign({style:{height:"7px",borderRadius:"50px"},variant:"determinate"},e))),r.createElement(o.Z,{sx:{display:"flex",alignItems:"flex-end"}},r.createElement(D.Z,{style:{fontSize:"12px"}},`${Math.round(e.value)}%`)))}var C=n(6699),L={};L.styleTagTransform=y(),L.setAttributes=f(),L.insert=p().bind(null,"head"),L.domAPI=u(),L.insertStyleElement=v(),s()(C.Z,L),C.Z&&C.Z.locals&&C.Z.locals;var M=n(4890);const F={links:[]},z={exports:[]},$={brandName:null,asin:null,childAsin:null,asinTitle:null,asinThumbnail:null,asinWeightedStarRating:null,reviewId:null,reviewTitle:null,reviewText:null,reviewRating:null,reviewAuthorPublicName:null,reviewCreatedTimestamp:null,reviewHasImages:null,reviewIsVideo:null,reviewIsVerifiedPurchase:null,reviewMarkedAsDone:null,reviewIsRepliedTo:null,orderId:null,orderTimestamp:null,isSellerOfRecord:null,isDigitalOrder:null,isBuyerOptedOut:null,responseMessage:null,url:null,status:0,originalLink:null,asinTotalReviewCount:null},B={running:!1};var K=n(8108);const U=(0,M.UY)({importRecords:(e=F,t)=>{switch(t.type){case"IMPORT_LINKS":let n=[];return t.payload.forEach((t=>{const r=e.links.filter((e=>e.link!==t.link));r.length&&n.push(r[0])})),{links:[...null==e?void 0:e.links,...n]};case"LOAD_RECORD":return{links:[...null==e?void 0:e.links,...t.payload.links]};case"CLEAR_LIST":return{links:[]};default:return e}},exportRecords:(e=z,t)=>{switch(t.type){case"COMPLETED":case"FAILED":case"TIMEOUT":return e;case"UPDATE":case"LOAD_EXPORT":return Object.assign(Object.assign({},e),t.payload);case"TRANSFORM_IMPORT_LINK":const n=t.payload.map((e=>Object.assign(Object.assign({},$),{url:e.link,originalLink:e.originalLink})));return Object.assign(Object.assign({},e),{exports:n});case"UPDATE_RESPONSE":return t.payload.forEach((t=>{e.exports.forEach(((n,r)=>{n.url===t.url&&(e.exports[r]=Object.assign(Object.assign({},e.exports[r]),t),e.exports[r].exportJSON=JSON.stringify(t))}))})),{exports:[...e.exports]};default:return Object.assign({},e)}},processData:(e=B,t)=>{switch(t.type){case"STOP":return Object.assign(Object.assign({},e),{running:!1});case"START":return Object.assign(Object.assign({},e),{running:!0});default:return Object.assign({},e)}},global:(e={},t)=>(t.type,K.VX,e)});var V=n(240);let q=0;const J=(0,V.Z)("amazon-records"),X=K.J7(J),W=(0,M.md)(X)(M.jB)(U);K.Ke(J)(W).then((e=>{W.dispatch({type:"LOAD_RECORD",payload:e.importRecords}),W.dispatch({type:"LOAD_EXPORT",payload:e.exportRecords})}));const H=document.createElement("div");document.body.appendChild(H),(0,l.s)(H).render(r.createElement(w.zt,{store:W},r.createElement(r.StrictMode,null,r.createElement((()=>{var e,t,n,l,a,s,c,u;const[d,p]=r.useState(0),[m,f]=(0,r.useState)(5),[g,v]=(0,r.useState)(10),h=(0,w.v9)((e=>e));let y=null===(e=null==h?void 0:h.importRecords)||void 0===e?void 0:e.links,b=null===(n=null===(t=null==h?void 0:h.exportRecords)||void 0===t?void 0:t.exports)||void 0===n?void 0:n.filter((e=>0===e.status));const x=null===(a=null===(l=null==h?void 0:h.exportRecords)||void 0===l?void 0:l.exports)||void 0===a?void 0:a.filter((e=>-1===e.status)),O=null===(c=null===(s=null==h?void 0:h.exportRecords)||void 0===s?void 0:s.exports)||void 0===c?void 0:c.filter((e=>1===e.status)),E=null===(u=null==h?void 0:h.processData)||void 0===u?void 0:u.running,R=(0,w.I0)(),[j,T]=(0,r.useState)(!1);let k=(0,r.useRef)();const P=e=>{let t=[],n=e/1e3,r=[];r=b.filter((e=>0===e.status)).slice(0,m),n-q>=g&&(console.log("Fired 10 Seconds...."),new Promise((e=>{console.log("promise");let n=[];r.forEach((e=>{console.log("loop"),n.push(fetch(e.url,{headers:{"Content-type":"application/json"}}).then((n=>{return r=void 0,l=void 0,i=function*(){if(200===n.status){const r=yield n.json();t.push(Object.assign(Object.assign(Object.assign({},r),{url:e.url}),{status:1}))}else t.push(Object.assign(Object.assign(Object.assign({},e),{url:e.url}),{status:-1}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{s(i.next(e))}catch(e){t(e)}}function a(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}s((i=i.apply(r,l||[])).next())}));var r,l,o,i})))})),Promise.all(n).then((t=>e(null)))})).then((()=>{console.log(t),R({type:"UPDATE_RESPONSE",payload:t})})),q=n),r.length?k.current=requestAnimationFrame(P):cancelAnimationFrame(k.current)};return(0,r.useLayoutEffect)((()=>{var e,t,n;return b.length>0&&(p((t=O.length,n=null===(e=null==h?void 0:h.exportRecords)||void 0===e?void 0:e.exports.length,Math.floor(t/n*100))),console.log(d)),E&&b.length>0&&(console.log("fired trigger"),k.current=requestAnimationFrame(P)),b.length<=0&&E&&(T(!1),R({type:"STOP"}),p(0)),()=>cancelAnimationFrame(k.current)}),[b,E]),r.createElement(r.Fragment,null,r.createElement(o.Z,{mx:"4px",my:"16px"},r.createElement("h1",{className:"ext_title"},"CSV Reader"),r.createElement(_,null),r.createElement(o.Z,{style:{marginTop:"20px",display:"flex",flexDirection:"column"}},r.createElement("small",null,"No of Batches"),r.createElement("input",{disabled:!0===E,type:"number",value:m,onChange:e=>{f(e.target.value)},placeholder:"No of Requests per Batch"})),r.createElement(o.Z,{style:{marginTop:"20px",display:"flex",flexDirection:"column"}},r.createElement("small",null,"Delay: (Seconds)"),r.createElement("input",{disabled:!0===E,type:"number",value:g,onChange:e=>v(e.target.value),placeholder:"Delay in Seconds"})),r.createElement(o.Z,{sx:{width:"100%"},style:{paddingTop:"40px"}},b.length>0&&r.createElement(o.Z,{style:{marginBottom:"10px"}},r.createElement("span",{style:{fontSize:"1.1em"}},`${null==b?void 0:b.length} Records waiting to be exported`)),r.createElement(N,{value:d}),r.createElement("span",{style:{margin:"5px 0px",color:"red",fontStyle:"italic",display:"block"}},`${x.length} failed to export, see options page`),r.createElement("span",{style:{margin:"5px 0px",color:"green",fontStyle:"italic",display:"block"}},`${y.length} previously imported files, click button to fetch`)),y.length<=0&&r.createElement(i.Z,{disabled:E,onClick:e=>{R({type:"START"})},style:{margin:"29px 0",width:"100%"},variant:"contained",size:"small"},E?"Stop Fetching":"Start Fetching Amazon Details"),y.length>0&&r.createElement(i.Z,{onClick:e=>{R({type:"TRANSFORM_IMPORT_LINK",payload:y.map((e=>({link:S({link:e}),originalLink:e})))}),R({type:"CLEAR_LIST"})},style:{margin:"29px 0",width:"100%"},variant:"contained",size:"small"},"Import Previous Imported files")))}),null))))}},l={};function o(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return r[e](n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,l)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,l]=e[u],a=!0,s=0;s<n.length;s++)(!1&l||i>=l)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(a=!1,l<i&&(i=l));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,r,l]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var l=Object.create(null);o.r(l);var i={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(l,i),l},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={42:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[i,a,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(s)var u=s(o)}for(t&&t(n);c<i.length;c++)l=i[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},n=self.webpackChunkcsv_reader=self.webpackChunkcsv_reader||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var i=o.O(void 0,[427,279],(()=>o(7119)));i=o.O(i)})();